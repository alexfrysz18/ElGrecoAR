<!DOCTYPE html>
<html>
  <%- include('partials/header') %>
  <body style="margin: 0px; overflow: hidden">
    <div class="arjs-loader">
      <div>Cargando experiencia</div>
    </div>
    <!-- a-frame scene -->
    <a-scene
      id="marker"
      vr-mode-ui="enabled: false;"
      renderer="logarithmicDepthBuffer: true;"
      embedded
      arjs="trackingMethod: best; sourceType: webcam;debugUIEnabled: false;"
    >
      <a-nft
        type="nft"
        id="imagen"
        url="assets/markers/greco"
        smooth="true"
        smoothCount="10"
        smoothTolerance=".01"
        smoothThreshold="5"
        emitevents="true"
      >
        <a-entity
          id="cielo"
          gltf-model="assets/models/juntos.glb"
          scale="800 800 600"
          rotation="-90 0 0"
          position="140 100 -420"
        >
        </a-entity>
        <a-sound id="sonido" src="assets/sound/ipanema.mp3" position="0 2 5" sound= "true" volume ="10"></a-sound>
      </a-nft>
      <a-entity camera></a-entity>

    </a-scene>
  </body>
  <script>
    let nft = document.querySelector("a-nft");
    let model = document.querySelector("[gltf-model]").components["gltf-model"].el;
    let sound = document.querySelector("a-sound");
    nft.addEventListener("markerFound",() => {
        model.setAttribute('animation-mixer', "loop: once; clampWhenFinished: true");
        console.log(sound.getAttribute());
        sound.setAttribute('autoplay', 'true');
       /* sound.setAttribute('sound', 'true');*/
    });
    nft.addEventListener("markerLost",() => {
      model.removeAttribute('animation-mixer');
      sound.removeAttribute('autoplay');
    });


  </script>
</html>
